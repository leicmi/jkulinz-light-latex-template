\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{tudelft-light/style}

%\\\\\\\\\\\ Document Preamble \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

    \RequirePackage[margin=6pc, headheight=14pt]{geometry}
    \RequirePackage{import}
    \RequirePackage{xcolor} % Useful for colored tables!
    \RequirePackage{amsfonts}
    \RequirePackage{amsmath}
    \RequirePackage{amssymb}
    \RequirePackage{mathtools}
    \RequirePackage[super]{nth}
    \RequirePackage{graphicx}
    \RequirePackage{tikz}
    \RequirePackage{pgfplots}
    \RequirePackage{datatool}
    \RequirePackage{tabularx}
    \RequirePackage{rotating}
    \RequirePackage{pdflscape}
    \RequirePackage{float}
    \RequirePackage{booktabs}
    \RequirePackage{color}
    \RequirePackage{titlesec}
    \RequirePackage{caption}
    \RequirePackage{enumitem}
    \RequirePackage{subcaption}
    \RequirePackage{pdfpages}
    \RequirePackage[hyphens]{url}
    \RequirePackage{array}
    \RequirePackage{fancyhdr} % Inserts a fancy smancy header into sub-pages
    \RequirePackage[fit, breakall]{truncate} % Used w/ fancyhdr to fix overlap
    \RequirePackage{notoccite}
    \RequirePackage[symbol]{footmisc}
    \RequirePackage{listings}
    \RequirePackage{siunitx}
    \RequirePackage[titletoc]{appendix}
    
    \RequirePackage{arydshln} % Adding dashlines in arrays \hdashline   
    \pgfplotsset{compat=1.16} % Setting compatibility for PGF Plots
    
    %% FOR DEBUGGING %%
    \RequirePackage{blindtext}


%\\\\\\\\\\\ Document Properties \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

    \RequirePackage[hidelinks, unicode]{hyperref}
    \hypersetup{
        pdftoolbar=true,        % show Acrobat’s toolbar?
        pdfmenubar=true,        % show Acrobat’s menu?
        pdffitwindow=false,     % window fit to page when opened
        pdfstartview={FitH},    % fits the width/height of the page
        pdftitle={},            % title
        pdfauthor={},           % author
        pdfsubject={},          % subject of the document
        pdfcreator={},          % creator of the document
        pdfproducer={},         % producer of the document
        pdfkeywords={},         % list of keywords
        pdfnewwindow=true,      % links in new window
        colorlinks=true,        % false: boxed links; true: colored links
        linkcolor=black,        % color of internal links
        citecolor=cyan,         % color of links to bibliography
        filecolor=black,        % color of file links
        urlcolor=black          % color of external links
    }

    % Automatic Referencing: WARNING HAS TO BE LOADED AFTER hyperref
    \RequirePackage[capitalise, noabbrev, nameinlink]{cleveref}
    % Removes Parenthesis around Equation labels
    \creflabelformat{equation}{#2\textup{#1}#3}
    % Footnote style Roman numerals
    \renewcommand{\thefootnote}{\roman{footnote}} 
    \RequirePackage{tablefootnote}
    
        
    \setlength{\parindent}{0cm} % No indent


%\\\\\\\\\\ Setting-up Nomenclature Classes \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
    \RequirePackage{nomencl}
    \makenomenclature
        
    % \RequirePackage{etoolbox}
    \renewcommand\nomgroup[1]{%
        \item[\bfseries
            \ifthenelse{\equal{#1}{G}}{Greek Symbols}{%
            \ifthenelse{\equal{#1}{B}}{Roman Symbols}{%
            \ifthenelse{\equal{#1}{S}}{Subscripts}{%
            \ifthenelse{\equal{T}{Superscripts}}{%
            %ADD MORE CLASSES HERE (Order does not matter, LaTeX will sort classes Based on !Class Reference
            %\ifstrequal{#1}{!Class Reference}{!Class Name}{%
            %\ifstrequal{#1}{!Class Reference}{!Class Name}{%
            %\ifstrequal{#1}{!Class Reference}{!Class Name}{%
            \ifthenelse{\equal{#1}{A}}{Abbreviations}{}}}}}%
        ]}
     
    % This argument will add the units
    \newcommand{\nomunit}[1]{%
    \renewcommand{\nomentryend}{\hspace*{\fill}\si{#1}}}
    
    %Renames Nomenclature to List of Symbols
    \renewcommand{\nomname}{List of Symbols}
               
%\\\\\\\\\\\ Definining MATLAB Appendix Colors \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
    
    \definecolor{mygreen}{RGB}{28,172,0}
    \definecolor{mylilas}{RGB}{170,55,241}
    \definecolor{mygrey}{RGB}{125,125,125}
    \definecolor{myBG}{RGB}{252,252,220}

%\\\\\\\\\\ Table Spacing & Layout Parameters\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

    \renewcommand{\arraystretch}{1.2}
    \newcolumntype{C}{>{\small\centering\arraybackslash}X} %For tabularX
    \newcolumntype{L}{>{\small\raggedright\arraybackslash}X} %For tabularX
    \newcolumntype{R}{>{\small\raggedleft\arraybackslash}X} %For tabularX
    \newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}} % centered p column
    
    %Changes parameters for \hdashline to make the dashes into dots:
    \setlength\dashlinedash{0.2pt}
    \setlength\dashlinegap{1.5pt}
    \setlength\arrayrulewidth{0.3pt}
    
%\\\\\\\\\\\ Set Document Layout & Title Margins \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

    \titlespacing*{\chapter}{0pt}{-25pt}{10pt}
    \definecolor{gray75}{gray}{0}
    \newcommand{\hsp}{\hspace{3pt}}
    \titleformat{\chapter}[hang]%
        {\Huge\bfseries}%
        {\thechapter\hsp\textcolor{gray75}\hsp}%
        {10pt}{\Huge\bfseries}

%\\\\\\\\\\\ Rename Bibliography to References \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

    \RequirePackage[backend=biber,
                style=numeric,
                citestyle=numeric,
                sorting=none
                ]{biblatex}
    \addbibresource{references.bib} %Bibliography File
    \newcommand{\BibliographyName}{References} %Name of Biblography
    
%\\\\\\\\\\\ Command for XDSM Files \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

% \newcommand{\zero}[1]{{#1}^{\left(0\right)}}


%\\\\\\\\\\\ Fixes Overlapping Text with fancyhdr package \\\\\\\\\\\\\\\\\\\\\

\fancypagestyle{fancytruncated}{%
    % Uses the truncate package to crop long section and chapter titles
    % Once the specified width is exceeded the title is split, the left
    % portion is kept, and `...' dots are appended to the end
    \fancyhead[R]{\small \truncate{0.47\textwidth} \leftmark}
    \fancyhead[L]{\small \truncate{0.47\textwidth} \rightmark}
}
\pagestyle{fancytruncated} % Display a fancy header on subsequent pages